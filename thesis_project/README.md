# Thesis Project: Prediction Markets vs. Options Markets

## Overview

This project analyzes and compares the implied probability distributions from Deribit Bitcoin options markets and Polymarket Bitcoin price prediction markets for the period March 21-28, 2025.

The analysis involves:
1. Fetching hourly aggregated Deribit options trade data.
2. Fetching hourly Binance BTC spot price data.
3. Cleaning the options data.
4. Calculating implied volatilities (IV) and fitting an SVI model to smooth the volatility smile.
5. Generating smoothed, arbitrage-free option prices.
6. Calculating the Risk-Neutral Density (RND) from smoothed option prices using the Breeden-Litzenberger method.
7. Integrating the RND over price buckets corresponding to Polymarket contracts.
8. Comparing the Deribit-implied probabilities with Polymarket probabilities on an hourly basis.
9. Visualizing the results.

## Project Structure

thesis_project_simple/│├── README.md                 # This file├── requirements.txt          # Python dependencies├── config.py                 # Configuration file (paths, dates, parameters)│├── data/│   ├── raw/                  # Raw input data (e.g., Polymarket CSV)│   ├── intermediate/         # Intermediate data files generated by scripts 01-04│   └── final/                # Final data files generated by script 05│├── plots/                    # Plots generated by script 05│└── scripts/                  # Python scripts for the workflow├── 01_fetch_deribit.py├── 02_fetch_binance.py├── 03_clean_options.py├── 04_smooth_options.py└── 05_analyze_compare.py
## Setup

1.  **Clone/Download:** Get the project files.
2.  **Python Environment:** It's recommended to use a virtual environment (e.g., `venv`).
    ```bash
    python -m venv .venv
    source .venv/bin/activate  # On Linux/macOS
    # .\.venv\Scripts\activate  # On Windows
    ```
3.  **Install Dependencies:**
    ```bash
    pip install -r requirements.txt
    ```
4.  **Raw Data:** Place the raw Polymarket data CSV file into the `data/raw/` directory. Ensure its filename matches the `POLYMARKET_RAW_FILE` setting in `config.py`.
5.  **Configuration:** Review and edit `config.py` to ensure dates, file paths (if changed), and parameters are correct for your analysis.

## Workflow - Running the Scripts

Run the scripts from the `thesis_project_simple` directory in the following order:

1.  **Fetch Deribit Options:**
    ```bash
    python scripts/01_fetch_deribit.py
    ```
    *Input:* None (fetches from API based on `config.py`)
    *Output:* `data/intermediate/deribit_options_raw_agg.csv` (or as defined in `config.py`)

2.  **Fetch Binance Spot:**
    ```bash
    python scripts/02_fetch_binance.py
    ```
    *Input:* None (fetches from API based on `config.py`)
    *Output:* `data/intermediate/binance_spot_btc.csv` (or as defined in `config.py`)

3.  **Clean Options Data:**
    ```bash
    python scripts/03_clean_options.py
    ```
    *Input:* `data/intermediate/deribit_options_raw_agg.csv`
    *Output:* `data/intermediate/deribit_options_cleaned.csv` (or as defined in `config.py`)

4.  **Smooth Options Data (IV & SVI):**
    ```bash
    python scripts/04_smooth_options.py
    ```
    *Input:* `data/intermediate/deribit_options_cleaned.csv`, `data/intermediate/binance_spot_btc.csv`
    *Output:* `data/intermediate/deribit_options_smoothed.csv` (or as defined in `config.py`)

5.  **Analyze & Compare:**
    ```bash
    python scripts/05_analyze_compare.py
    ```
    *Input:* `data/intermediate/deribit_options_smoothed.csv`, `data/raw/polymarket_data.csv`
    *Output:*
        * `data/final/rnd_comparison_smoothed_hourly.csv`
        * `data/final/deribit_rnd_smoothed_hourly.csv`
        * Plots saved in the `plots/` directory.
        * Summary statistics printed to the console.

## Notes

* Ensure the file paths and filenames in `config.py` match your setup.
* API fetching scripts connect to external services and may take time or encounter rate limits.
* The SVI smoothing script can be computationally intensive.
* Review the log output of each script for warnings or errors.

